{% extends 'index-Status.html' %}

{% load crispy_forms_tags %}

{% block content %}
<!--Titulo-->
 <div class="br-pageheader pd-y-15 pd-l-20">
    <nav class="breadcrumb pd-0 mg-0 tx-12">
      <a class="breadcrumb-item" > {{proyecto}} </a>
      <span class="breadcrumb-item active">Estatus</span>
    </nav>
  </div>
  <div class="br-section-wrapper" style=" padding-left: 3px; padding-right: 3px;">
   <div class="row row-sm d-flex container col-md-12"style="
   padding-left: 0px;
   padding-right: 0px;
">
    <h4 class="mg-b-0 tx-uppercase tx-bold tx-inverse tx-poppins mg-t-10 mg-b-20" style="text-align: left; margin-left: 30px;" >Estatus documental del proyecto / {{proyecto}}</h4>
        <table id="datatable1" class="records_list table table-striped table-bordered table-hover dataTable no-footer table-primary"style="width:100%;table-layout:Inherit;">
              <thead>
                <tr role="row">
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Especialidad</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Descripción</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Código</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Tipo</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Rev. Actual</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">cargo de:</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Último Transmittal</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Días de revisión</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Estado</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Fecha Inicial</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">Fecha Final</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 10px;">(%) de Avance</th>
                  <th  tabindex="0" style="color:#fff;text-align: center;vertical-align: middle;font-size: 8px;">Cic.revisión(d)</th>
                </tr>
              </thead>
                <tbody>
            <!--Loop Listar Documento-->
            {% for documento in Listado %}
              {% if not documento.1 %}
              <tr role="row" class="odd">
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > {{documento.0.Especialidad}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > {{documento.0.Descripcion}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > {{documento.0.Codigo_documento}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > {{documento.0.Tipo_Documento}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > Pendiente </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;" > </th>
              </tr>
              {% else %}
              <tr role="row" class="odd">
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.0.Especialidad}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.0.Descripcion}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> <a href="{% url 'buscador-detalle' documento.0.pk %}">{{documento.0.Codigo_documento}}</a></th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.0.Tipo_Documento}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.1.0.get_revision_display}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.1.1.0.destinatario.perfil.empresa}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> <a href="{% url 'paquete-detalle' documento.1.1.0.pk %}">{{documento.1.1.0}} </a></th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.1.4}}</th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {% if not documento.1.0.get_estado_cliente_display %} {{documento.1.0.get_estado_contratista_display}} {% else %}{{documento.1.0.get_estado_cliente_display}} {% endif %}  </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.1.5|date:"d-m-y"}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.1.1.0.fecha_creacion|date:"d-m-y"}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.1.3}} </th>
                <th style="word-wrap: break-word;text-align: center;color: black;vertical-align: middle;padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px; font-size: 10px;"> {{documento.1.6}} </th>
              </tr>
              {% endif %}
              {% endfor %}
        </table>       

    </div>
{% if is_paginated %}
    <div class="ht-80 d-flex align-items-center justify-content-center">
      <nav aria-label="Page navigation">
        <ul class="pagination pagination-basic mg-b-0">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?page=1"><i class="fa fa-angle-double-left"></i></a></li>
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="ANTERIOR"><i class="fa fa-angle-left"></i></a></li>

          {% if page_obj.has_previous %}
            <li class="page-item active"><a class="page-link active" href="page={{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a></li>
          {% endif %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.number }}">{{ page_obj.number }}</a></li>
          <li class="page-item disabled"><span class="page-link">...</span></li>
          <li class="page-item"><a class="page-link" href="#">{{ page_obj.paginator.num_pages }}</a></li>
       {% endif %}
       {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
              <i class="fa fa-angle-right"></i>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last">
              <i class="fa fa-angle-double-right"></i>
            </a>
          </li>
    {% endif %}
        </ul>
      </nav>
    </div>
{% endif %}
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>


<script>
  $("#fileInput").change(function(){
    $("button").prop("disabled", this.files.length == 0);
});
</script>

<script>
  $(document).ready(function() {
      $('#datatable1').DataTable(
        {
          "dom": 'B<"float-right"f>t<"float-left"l>p<"clearfix">',
          "responsive": true,
          "language": {
              "url": "https://cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"
          },
          buttons:{
            dom: {
                button: {
                    className: 'btn btn-success'
                }
            },
          },
          buttons:[ 
            {
                //definimos estilos del boton de excel
                extend: "excel",
                text:'Exportar a Excel',
                className:'btn btn-success',

                // 1 - ejemplo básico - uso de templates pre-definidos
                //definimos los parametros al exportar a excel
                
                excelStyles: {                
                    template: "header_blue",  // Apply the 'header_blue' template part (white font on a blue background in the header/footer)
                    template:"green_medium",
                    
                    "template": [
                        "blue_medium",
                        "header_green",
                        "title_medium"
                    ] 
                    
                },
                

            }]	     
        });
  } );
</script>

{% endblock content %}
