{% extends 'index-config.html' %} 
{% load crispy_forms_tags %} 

{% block content%}
<!--Titulo-->

<div class="br-mainpanel">
  <div class="br-pageheader pd-y-15 pd-md-l-20">
    <nav class="breadcrumb pd-0 mg-0 tx-12">
      <a class="breadcrumb-item"> {{proyecto}} </a>
      <span class="breadcrumb-item active">Lista de Proyecto</span>
    </nav>
  </div>
  <div class="br-pagebody mg-t-5 pd-x-30">
       <div class=" ht-md-65 bd bg-gray-100 pd-y-20 pd-md-y-0 pd-x-20 d-md-flex align-items-center justify-content-between mg-t-20" style="align-items: baseline;">
        <ul class="nav nav-gray-600 active-info tx-uppercase tx-12 tx-medium tx-spacing-2 flex-column flex-md-row pd-t-20 pd-md-t-0" role="tablist">
        {% if request.user.is_superuser == true %}
          <li class="nav-item"><a class="nav-link active" data-toggle="tab" href="{% url 'lista-proyecto' %}" role="tab">Lista de Proyectos</a></li>
        {% else %}
        {% endif %}
          <li class="nav-item"><a class="nav-link tx-white" data-toggle="tab" href="{% url 'crear-proyecto' %}" role="tab"><i class="icon ion-gear-a"></i>&numsp;Configurar Proyectos</a></li>

           <li class="nav-item mg-l-10 mg-r-10">
            <div class="dropdown">
              <button class="btn btn-info btn-block dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="icon ion-person-stalker"></i>&numsp;Gestionar&numsp;Usuarios
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                <a class="nav-link" href="{% url 'crear-usuario' %}"><button class="dropdown-item" type="button"><i class="icon ion-person-add"></i> Agregar Usuario</button></a>
                <a class="nav-link" href="{% url 'listar-usuarios' %}"><button class="dropdown-item" type="button"><i class="icon ion-person"></i> Listar Usuarios</button></a>
                <a class="nav-link" href="{% url 'add-user-proyecto' %}"><button class="dropdown-item" type="button"><i class="fas fa-user-chart"></i>Agregar Usuarios a Proyectos</button></a>
              </div>
            </div>
          </li>
          <li class="nav-item">
            <div class="dropdown">
            <button class="btn btn-info btn-block dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="fa fa-close"></i>&numsp;Restricciones
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
              <a class="nav-link" href="{% url 'restriccion' %}"><button class="dropdown-item" type="button"><i class="fa fa-close"></i>&numsp;Agregar Restricciones</button></a>
              <a class="nav-link" href="{% url 'no-cumplimiento' %}"><button class="dropdown-item" type="button"><i class="fa fa-close"></i>&numsp; No cumplimiento</button></a>
            </div>
          </div>
            </li>
          <li class="nav-item"><a class="nav-link"  href="{% url 'list-umbrales' %}"><i class="fa fa-calendar"></i>&numsp;Umbrales</a></li>
        </ul>
      </div><!-- ht-65 -->

    <div class="br-section-wrapper">
      <div class="pd-x-20 pd-sm-x-30 mg-b-10">
        <h4 class="tx-gray-800 mg-b-5">Lista de Proyecto / {{proyecto}}</h4>
        {% comment %}
        <p class="mg-b-0">{{proyecto}}</p>
        {% endcomment %}
        <p class="mg-b-0">{{codigo_proyecto}}</p>
      </div>

      <div class="row row-sm d-flex justify-content-center">
        <table class="
            table table-responsive table-striped
            mg-b-0
            table-bordered table-primary
          ">
          <!--Table-->
          <thead>
            <tr>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: white;
                ">
                Nombre
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: white;
                ">
                Encargado
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: white;
                ">
                Descripción
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: white;
                ">
                Código
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: white;
                ">
                Fecha Inicio
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: white;
                ">
                Fecha Término
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: white;
                " colspan="2">
                Acción
              </th>
            </tr>
          </thead>
          <tbody>
            {% for proyecto in proyectos %}
            <tr>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: black;
                ">
                {{proyecto.nombre}}
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: black;
                ">
                {{proyecto.encargado}}
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: black;
                ">
                {{proyecto.descripcion}}
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: black;
                ">
                {{proyecto.codigo}}
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: black;
                ">
                {{proyecto.fecha_inicio|date:'d-M-y'}}
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: black;
                ">
                {{proyecto.fecha_termino|date:'d-M-y'}}
              </th>

              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: black;
                ">
                <a href="{% url 'editar-proyecto' proyecto.pk %}">
                  <i class="fa fa-pencil"></i>
                </a>
              </th>
              <th style="
                  text-align: center;
                  border: 2px;
                  border-color: grey;
                  color: black;
                ">
                <a href="{% url 'delete-proyecto' proyecto.pk %}" style="color:red;">
                  <i class="fa fa-trash"></i>
                </a>
              </th>
            </tr>
            {% endfor %}
            <!--Fin Loop-->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock content %}