{% extends 'index-buscador.html' %}

{% load crispy_forms_tags %}

{% block content %}
<!--Titulo-->
<div class="br-mainpanel" style="position: relative;">
 <div class="br-pageheader pd-y-15 pd-l-20">
    <nav class="breadcrumb pd-0 mg-0 tx-12">
      <a class="breadcrumb-item" > {{proyecto}} </a>
      <span class="breadcrumb-item active">Buscador</span>
    </nav>
 </div>
  <div class="pd-x-20 pd-sm-x-30 pd-t-20 pd-sm-t-30">
    <h4 class="tx-gray-800 mg-b-5">Panel de búsqueda / {{proyecto}}</h4>
    <p class="mg-b-0"></p>
  </div>
<div class="br-pagebody mg-t-5 pd-x-30">
  <div class="br-section-wrapper">
    <table id="datatable2" class="table table-striped table-bordered table-hover table-primary" role="grid" aria-describedby="datatable2_info" style="width: 100%;">
              <thead>
                <tr role="row">
                {% comment %} <th tabindex="0" aria-controls="datatable1" rowspan="1" colspan="1" style="width: auto;text-align:center;color:#fff;"></th> {% endcomment %}
                <th tabindex="0" aria-controls="datatable1" rowspan="1" colspan="1" style="width: auto;text-align:center;color:#fff;"></th>
                <th tabindex="0" aria-controls="datatable1" rowspan="1" colspan="1" style="width: auto;text-align:center;color:#fff;">Especialidad</th>
                <th tabindex="0" aria-controls="datatable1" rowspan="1" colspan="1" style="width: auto;text-align:center;color:#fff;" >Descripción</th>
                <th tabindex="0" aria-controls="datatable1" rowspan="1" colspan="1" style="width: auto;text-align:center;color:#fff;" >Código</th>
                <th tabindex="0" aria-controls="datatable1" rowspan="1" colspan="1" style="width: auto;text-align:center;color:#fff;" >Tipo</th>
               <th tabindex="0" aria-controls="datatable1" rowspan="1" colspan="1" style="width: auto;text-align:center;color:#fff;" >Revisión Actual</th> 
                </tr>
              </thead>
              <tbody>
               {% for documento in documentos %}
                  <tr role="row" class="odd">
                    {% comment %} <td class="valign-middle hidden-xs-down"tabindex="0" class="sorting_1"style="vertical-align:center;text-align:center;"><input type="checkbox" name="dnld" class="onoffswitch-checkbox"style="display: none;"checked="true"></td>             {% endcomment %}
                    <td class="valign-middle hidden-xs-down"tabindex="0" class="sorting_1"style="vertical-align:center;text-align:center;"><a href="{% url 'buscador-detalle' documento.pk %}" class="btn btn-teal center"><i class="fa fa-plus"></i></a></td>            
                    <td class="valign-middle hidden-xs-down"tabindex="0" class="sorting_1"style="vertical-align:center;text-align:center;">{{documento.Especialidad}}</td>            
                    <td class="valign-middle hidden-xs-down"tabindex="0" class="sorting_1"style="vertical-align:center;text-align:center;">{{documento.Descripcion}}</td>            
                    <td class="valign-middle hidden-xs-down"tabindex="0" class="sorting_1"style="vertical-align:center;text-align:center;">{{documento.Codigo_documento}}</td>            
                    <td class="valign-middle hidden-xs-down"tabindex="0" class="sorting_1"style="vertical-align:center;text-align:center;">{{documento.Tipo_Documento}}</td>            
                   <td class="valign-middle hidden-xs-down"tabindex="0" class="sorting_1"style="vertical-align:center;text-align:center;">{{documento.version_set.last.get_revision_display}}</td>         
                  </tr>
                  {% endfor %} 
                </tbody>
    </table>  
  </div>
</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>


<script>
  $("#fileInput").change(function(){
    $("button").prop("disabled", this.files.length == 0);
});
</script>

  <script>
  $(document).ready(function() {
      $('#datatable2').DataTable(
        {
         "dom": 'B<"float-right"f>t<"float-left"l>p<"clearfix">',
          "responsive": true,
          "bSort": false,
          "language": {
          "url": "https://cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"
          },
          "order":[[4,"desc"]],
          buttons:{
            dom: {
                button: {
                    className: 'btn btn-success'
                }
            },
          },
          buttons:[ 
            {
                //definimos estilos del boton de excel
                extend: "excelHtml5",
                text:'Exportar a Excel',
                className:'btn btn-success',

                // 1 - ejemplo básico - uso de templates pre-definidos
                //definimos los parametros al exportar a excel
              customize: function( xlsx ) {
                var sheet = xlsx.xl.worksheets['sheet1.xml'];
 
                $('row c[r^="C"]', sheet).attr( 's', '2' );
            },
                 excelStyles: {               // Apply the 'header_blue' template part (white font on a blue background in the header/footer)
                    template:"blue_medium",
                    
                    
                },

            }]	     
        });
  } );
</script>
{% endblock content %}
    